import defaultLang from "./lang/en";
import dayjs from 'dayjs';
var lang = defaultLang;

function template(str, option) {
  if (!str || !option) return str;
  return str.replace(/\{(\w+)\}/g, function (match, key) {
    return option[key];
  });
}

export var t = function t(path, option) {
  var value;
  var array = path.split('.');
  var current = lang;

  for (var i = 0, j = array.length; i < j; i++) {
    var property = array[i];
    value = current[property];
    if (i === j - 1) return template(value, option);
    if (!value) return '';
    current = value;
  }

  return '';
};
export var use = function use(l) {
  lang = l || lang;

  if (lang.name) {
    dayjs.locale(lang.name);
  }
};
export default {
  use: use,
  t: t
};