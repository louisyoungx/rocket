/**
 * Bind after-leave event for vue instance. Make sure after-leave is called in any browsers.
 */
export default function (instance, callback, speed) {
  if (speed === void 0) {
    speed = 300;
  }

  if (!instance || !callback) throw new Error('instance & callback is required');
  var called = false;

  var afterLeaveCallback = function afterLeaveCallback() {
    if (called) return;
    called = true;

    if (callback) {
      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      callback(args);
    }
  }; // TODO: migrate to [mitt](https://github.com/developit/mitt)
  // if (once) {
  //   instance.$once('after-leave', afterLeaveCallback)
  // } else {
  //   instance.$on('after-leave', afterLeaveCallback)
  // }


  setTimeout(function () {
    afterLeaveCallback();
  }, speed + 100);
}